# OHW11ans
OTUS ДЗ11

Первые шаги с Ansible

Подготовить стенд на Vagrant как минимум с одним сервером. На этом сервере используя Ansible необходимо развернуть nginx со следующими условиями:

необходимо использовать модуль yum/apt;
конфигурационные файлы должны быть взяты из шаблона jinja2 с перемененными;
после установки nginx должен быть в режиме enabled в systemd;
должен быть использован notify для старта nginx после установки;
сайт должен слушать на нестандартном порту - 8080, для этого использовать переменные в Ansible.

@@@



По Vagrantfile создаются две машины nginx для развёртывания веб-сервера и clnt - клиент для проверки работы  nginx. На обеих машинах centos8.
Provisioning делается ansible. При этом в сценарии nginx.yml указан только один хост - nginx. Поэтому сценарий полностью выполняется для этой машины, а для clnt пропускается.
По сценарию происходит установка репозитория и пакета nginx c включением режима enabled в systemd, далее происходит конфигурирование файлом nginx.conf.j2, для чего используется переменная nginx_port_to_listen: 8080, определённая в nginx.yml. Служба перезапускается, файрволл отключается.

Проверка после отработки vagrant:
vagrant ssh clnt

curl http://192.168.50.117:8080